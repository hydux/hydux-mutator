!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.mutator=r():(t.hydux=t.hydux||{},t.hydux.mutator=r())}("undefined"!=typeof self?self:this,function(){return function(t){function r(e){if(n[e])return n[e].exports;var u=n[e]={i:e,l:!1,exports:{}};return t[e].call(u.exports,u,u.exports,r),u.l=!0,u.exports}var n={};return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=1)}([,function(t,r,n){"use strict";function e(t){void 0===t&&(t=50),v=new h.default({maxSize:t})}function u(t){if(x(t))return p({},t);var n=t[r.customCloneProp];if(m(n))return n.call(t);for(var e=new t.constructor,u=Object.keys(t),o=u.length;o--;){var i=u[u.length-1-o];e[i]=t[i]}return e}function o(t,r){if(void 0===r&&(r=[]),!m(t))return t;var n=t.toString(),e=v.get(n);if(e){for(var u=e.dynamicKeys.length,o=0;o<u;o++)e.keys[e.dynamicKeys[o]]=r[o];return e.keys}var i=[],a=null;try{a=y(n)}catch(t){throw t("parse accessor failed, accessor:",n),t}for(var c=a.keyPath.length,s=[],f=0,o=0;o<c;o++){var l=a.keyPath[o];"string"===l.type||"number"===l.type?i[o]=l.value:"variable"===l.type&&(i[o]=r[f++],s.push(o))}return v.set(n,{keys:i,dynamicKeys:s}),i}function i(t,n,e){if(0===b.length)return t;t=t||{};var o=t[r.customSetProp];if(m(o))return o.call(t,n,e);var i=u(t);return i[n]=e,i}function a(t,r,n,e,u){for(var a=n===w.updateIn,c=o(r,u),s=c.length-1,f=[t],l=t,p=0;p<s;p++){var h=c[p];f.push(l=l[h]||{})}for(var d=a?e(f[s][c[s]]):e,p=s;p>=0;p--)l=f[p],d=i(l,c[p],d);return d}function c(t,r,n){var e=t,u=o(r,n);if(m(t.getIn))return t.getIn(u);for(var i=u.length,a=0;a<i;a++){e=t[u[a]]}return e}function s(t,r,n,e){return a(t,r,w.setIn,n,e)}function f(t,r,n){return a(t,r,w.setIn,void 0,n)}function l(t,r,n,e){return n?a(t,r,w.updateIn,n,e):t}var p=this&&this.__assign||Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++){r=arguments[n];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t};Object.defineProperty(r,"__esModule",{value:!0});var h=n(2),d=n(3),v=new h.default({maxSize:50}),y=function(t){return d.default.accessor.tryParse(t)};r.setCacheSize=e;var g=function(t){return void 0!==t&&null!==t},m=function(t){return"function"==typeof t},x=function(t){return!g(t.constructor)||t.constructor===Object};r.customSetProp="@@hydux-mutator/set",r.customCloneProp="@@hydux-mutator/clone";var w;!function(t){t[t.setIn=1]="setIn",t[t.updateIn=2]="updateIn"}(w||(w={}));var b=[];r.getIn=c,r.setIn=s,r.unsetIn=f,r.updateIn=l,r.default={setIn:s,unsetIn:f,updateIn:l}},function(t,r,n){"use strict";var e=this&&this.__assign||Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++){r=arguments[n];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t};Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t){if(this.maxSize=0,this.cache={},this.oldCache={},this._size=0,t=e({},t),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize}return t.prototype._set=function(t,r){this.cache[t]=r,++this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache={})},t.prototype.get=function(t){if(void 0!==this.cache[t])return this.cache[t];if(void 0!==this.oldCache[t]){var r=this.oldCache[t];return this._set(t,r),r}},t.prototype.set=function(t,r){return void 0!==this.cache[t]?this.cache[t]=r:this._set(t,r),this},t.prototype.has=function(t){return void 0!==this.cache[t]||void 0!==this.oldCache[t]},t.prototype.delete=function(t){delete this.cache[t]&&this._size--,delete this.oldCache[t]},t}();r.default=u},function(t,r,n){"use strict";function e(t){return i.string(t).thru(u)}function u(t){return t.skip(a)}function o(t){var r={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};return t.replace(/\\(u[0-9a-fA-F]{4}|[^u])/,function(t,n){var e=n.charAt(0),u=n.slice(1);return"u"===e?String.fromCharCode(parseInt(u,16)):r.hasOwnProperty(e)?r[e]:e})}Object.defineProperty(r,"__esModule",{value:!0});var i=n(4),a=i.regexp(/\s*/m);r.default=i.createLanguage({_:function(){return i.optWhitespace},letters:function(){return i.regexp(/[a-zA-Z0-9$_]+/).skip(a).desc("letters")},lettersArray:function(t){return t.lbracket.then(t.letters.sepBy(t.comma)).skip(t.rbracket).desc("letters array")},arg:function(t){return t.letters.or(t.lettersArray).desc("arg")},lbracket:function(){return e("[")},rbracket:function(){return e("]")},lparen:function(){return e("(")},lgetcall:function(){return e("get(")},rgetcall:function(){return e(")")},rparen:function(){return e(")")},lbrace:function(){return e("{")},rbrace:function(){return e("}")},comma:function(){return e(",")},dot:function(){return e(".")},semi:function(){return e(";")},arrow:function(){return e("=>")},param:function(t){return i.regexp(/"((?:\\.|.)*?)"/,1).map(function(t){return{type:"string",value:o(t)}}).or(i.regexp(/'((?:\\.|.)*?)'/,1).map(function(t){return{type:"string",value:o(t)}})).or(i.regexp(/\d+/).map(function(t){return{type:"number",value:Number(t)}})).or(t.letters.map(function(t){return{type:"variable",value:t}}))},field:function(t){return t.dot.then(t.letters.map(function(t){return{type:"string",value:t}})).or(t.lbracket.then(t.param).skip(t.rbracket)).or(t.lgetcall.then(t.param).skip(t.rgetcall))},fnKeyword:function(){return e("function")},return:function(){return e("return")},function:function(t){return i.seqObj(t.fnKeyword,t.lparen,["args",t.arg.sepBy(t.comma).desc("args")],t.rparen,t.lbrace,t.return,["obj",t.letters],["keyPath",t.field.sepBy(t._)],t.semi.or(t._),t.rbrace,i.eof)},lambda:function(t){return i.seqObj(t.lparen.or(t._),["args",t.arg.sepBy(t.comma).desc("args")],t.rparen.or(t._),t.arrow,t.lbrace.or(t._),t.return.or(t._),["obj",t.letters],["keyPath",t.field.sepBy(t._)],t.semi.or(t._),t.rbrace.or(t._),i.eof)},accessor:function(t){return t.function.or(t.lambda)}})},function(t,r,n){!function(r,n){t.exports=n()}(0,function(){return function(t){function r(e){if(n[e])return n[e].exports;var u=n[e]={i:e,l:!1,exports:{}};return t[e].call(u.exports,u,u.exports,r),u.l=!0,u.exports}var n={};return r.m=t,r.c=n,r.i=function(t){return t},r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=0)}([function(t,r,n){"use strict";function e(t){if(!(this instanceof e))return new e(t);this._=t}function u(t){return t instanceof e}function o(t){return"[object Array]"==={}.toString.call(t)}function i(t,r){return{status:!0,index:t,value:r,furthest:-1,expected:[]}}function a(t,r){return{status:!1,index:-1,value:null,furthest:t,expected:[r]}}function c(t,r){if(!r)return t;if(t.furthest>r.furthest)return t;var n=t.furthest===r.furthest?f(t.expected,r.expected):r.expected;return{status:t.status,index:t.index,value:t.value,furthest:r.furthest,expected:n}}function s(t,r){var n=t.slice(0,r).split("\n");return{offset:r,line:n.length,column:n[n.length-1].length+1}}function f(t,r){var n=t.length,e=r.length;if(0===n)return r;if(0===e)return t;for(var u={},o=0;o<n;o++)u[t[o]]=!0;for(var i=0;i<e;i++)u[r[i]]=!0;var a=[];for(var c in u)u.hasOwnProperty(c)&&a.push(c);return a.sort(),a}function l(t){if(!u(t))throw new Error("not a parser: "+t)}function p(t){if(!o(t))throw new Error("not an array: "+t)}function h(t){if("number"!=typeof t)throw new Error("not a number: "+t)}function d(t){if(!(t instanceof RegExp))throw new Error("not a regexp: "+t);for(var r=w(t),n=0;n<r.length;n++){var e=r.charAt(n);if("i"!==e&&"m"!==e&&"u"!==e)throw new Error('unsupported regexp flag "'+e+'": '+t)}}function v(t){if("function"!=typeof t)throw new Error("not a function: "+t)}function y(t){if("string"!=typeof t)throw new Error("not a string: "+t)}function g(t){return 1===t.length?t[0]:"one of "+t.join(", ")}function m(t,r){var n=r.index,e=n.offset;if(e===t.length)return", got the end of the input";var u=e>0?"'...":"'",o=t.length-e>12?"...'":"'";return" at line "+n.line+" column "+n.column+", got "+u+t.slice(e,e+12)+o}function x(t,r){return"expected "+g(r.expected)+m(t,r)}function w(t){var r=""+t;return r.slice(r.lastIndexOf("/")+1)}function b(t){return RegExp("^(?:"+t.source+")",w(t))}function _(){for(var t=[].slice.call(arguments),r=t.length,n=0;n<r;n+=1)l(t[n]);return e(function(n,e){for(var u,o=new Array(r),a=0;a<r;a+=1){if(u=c(t[a]._(n,e),u),!u.status)return u;o[a]=u.value,e=u.index}return c(i(e,o),u)})}function O(){for(var t={},r=0,n=[].slice.call(arguments),a=n.length,s=0;s<a;s+=1){var f=n[s];if(!u(f)){if(o(f)&&2===f.length&&"string"==typeof f[0]&&u(f[1])){var l=f[0];if(t[l])throw new Error("seqObj: duplicate key "+l);t[l]=!0,r++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===r)throw new Error("seqObj expects at least one named parser, found zero");return e(function(t,r){for(var e,u={},s=0;s<a;s+=1){var f,l;if(o(n[s])?(f=n[s][0],l=n[s][1]):(f=null,l=n[s]),e=c(l._(t,r),e),!e.status)return e;f&&(u[f]=e.value),r=e.index}return c(i(r,u),e)})}function k(){var t=[].slice.call(arguments);if(0===t.length)throw new Error("seqMap needs at least one argument");var r=t.pop();return v(r),_.apply(null,t).map(function(t){return r.apply(null,t)})}function j(t){var r={};for(var n in t)({}).hasOwnProperty.call(t,n)&&function(n){var e=function(){return t[n](r)};r[n]=N(e)}(n);return r}function P(){var t=[].slice.call(arguments),r=t.length;if(0===r)return B("zero alternates");for(var n=0;n<r;n+=1)l(t[n]);return e(function(r,n){for(var e,u=0;u<t.length;u+=1)if(e=c(t[u]._(r,n),e),e.status)return e;return e})}function E(t,r){return z(t,r).or(A([]))}function z(t,r){return l(t),l(r),k(t,r.then(t).many(),function(t,r){return[t].concat(r)})}function I(t){y(t);var r="'"+t+"'";return e(function(n,e){var u=e+t.length,o=n.slice(e,u);return o===t?i(u,o):a(e,r)})}function S(t,r){d(t),arguments.length>=2?h(r):r=0;var n=b(t),u=""+t;return e(function(t,e){var o=n.exec(t.slice(e));if(o){if(0<=r&&r<=o.length){var c=o[0],s=o[r];return i(e+c.length,s)}return a(e,"valid match group (0 to "+o.length+") in "+u)}return a(e,u)})}function A(t){return e(function(r,n){return i(n,t)})}function B(t){return e(function(r,n){return a(n,t)})}function C(t){if(u(t))return e(function(r,n){var e=t._(r,n);return e.index=n,e.value="",e});if("string"==typeof t)return C(I(t));if(t instanceof RegExp)return C(S(t));throw new Error("not a string, regexp, or parser: "+t)}function q(t){return l(t),e(function(r,n){var e=t._(r,n),u=r.slice(n,e.index);return e.status?a(n,'not "'+u+'"'):i(n,null)})}function M(t){return v(t),e(function(r,n){var e=r.charAt(n);return n<r.length&&t(e)?i(n+1,e):a(n,"a character matching "+t)})}function F(t){return M(function(r){return t.indexOf(r)>=0})}function K(t){return M(function(r){return t.indexOf(r)<0})}function L(t){return e(t(i,a))}function R(t,r){return M(function(n){return t<=n&&n<=r}).desc(t+"-"+r)}function W(t){return v(t),e(function(r,n){for(var e=n;e<r.length&&t(r.charAt(e));)e++;return i(e,r.slice(n,e))})}function N(t,r){arguments.length<2&&(r=t,t=void 0);var n=e(function(t,e){return n._=r()._,n._(t,e)});return t?n.desc(t):n}function T(){return B("fantasy-land/empty")}var Z=e.prototype;Z.parse=function(t){if("string"!=typeof t)throw new Error(".parse must be called with a string as its argument");var r=this.skip(H)._(t,0);return r.status?{status:!0,value:r.value}:{status:!1,index:s(t,r.furthest),expected:r.expected}},Z.tryParse=function(t){var r=this.parse(t);if(r.status)return r.value;var n=x(t,r),e=new Error(n);throw e.type="ParsimmonError",e.result=r,e},Z.or=function(t){return P(this,t)},Z.trim=function(t){return this.wrap(t,t)},Z.wrap=function(t,r){return k(t,this,r,function(t,r){return r})},Z.thru=function(t){return t(this)},Z.then=function(t){return l(t),_(this,t).map(function(t){return t[1]})},Z.many=function(){var t=this;return e(function(r,n){for(var e=[],u=void 0;;){if(u=c(t._(r,n),u),!u.status)return c(i(n,e),u);if(n===u.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");n=u.index,e.push(u.value)}})},Z.tie=function(){return this.map(function(t){p(t);for(var r="",n=0;n<t.length;n++)y(t[n]),r+=t[n];return r})},Z.times=function(t,r){var n=this;return arguments.length<2&&(r=t),h(t),h(r),e(function(e,u){for(var o=[],a=void 0,s=void 0,f=0;f<t;f+=1){if(a=n._(e,u),s=c(a,s),!a.status)return s;u=a.index,o.push(a.value)}for(;f<r&&(a=n._(e,u),s=c(a,s),a.status);f+=1)u=a.index,o.push(a.value);return c(i(u,o),s)})},Z.result=function(t){return this.map(function(){return t})},Z.atMost=function(t){return this.times(0,t)},Z.atLeast=function(t){return k(this.times(t),this.many(),function(t,r){return t.concat(r)})},Z.map=function(t){v(t);var r=this;return e(function(n,e){var u=r._(n,e);return u.status?c(i(u.index,t(u.value)),u):u})},Z.skip=function(t){return _(this,t).map(function(t){return t[0]})},Z.mark=function(){return k($,this,$,function(t,r,n){return{start:t,value:r,end:n}})},Z.node=function(t){return k($,this,$,function(r,n,e){return{name:t,value:n,start:r,end:e}})},Z.sepBy=function(t){return E(this,t)},Z.sepBy1=function(t){return z(this,t)},Z.lookahead=function(t){return this.skip(C(t))},Z.notFollowedBy=function(t){return this.skip(q(t))},Z.desc=function(t){var r=this;return e(function(n,e){var u=r._(n,e);return u.status||(u.expected=[t]),u})},Z.fallback=function(t){return this.or(A(t))},Z.ap=function(t){return k(t,this,function(t,r){return t(r)})},Z.chain=function(t){var r=this;return e(function(n,e){var u=r._(n,e);return u.status?c(t(u.value)._(n,u.index),u):u})},Z.concat=Z.or,Z.empty=T,Z.of=A,Z["fantasy-land/ap"]=Z.ap,Z["fantasy-land/chain"]=Z.chain,Z["fantasy-land/concat"]=Z.concat,Z["fantasy-land/empty"]=Z.empty,Z["fantasy-land/of"]=Z.of,Z["fantasy-land/map"]=Z.map;var $=e(function(t,r){return i(r,s(t,r))}),D=e(function(t,r){return r>=t.length?a(r,"any character"):i(r+1,t.charAt(r))}),G=e(function(t,r){return i(t.length,t.slice(r))}),H=e(function(t,r){return r<t.length?a(r,"EOF"):i(r,null)}),J=S(/[0-9]/).desc("a digit"),Q=S(/[0-9]*/).desc("optional digits"),U=S(/[a-z]/i).desc("a letter"),V=S(/[a-z]*/i).desc("optional letters"),X=S(/\s*/).desc("optional whitespace"),Y=S(/\s+/).desc("whitespace");e.all=G,e.alt=P,e.any=D,e.createLanguage=j,e.custom=L,e.digit=J,e.digits=Q,e.empty=T,e.eof=H,e.fail=B,e.formatError=x,e.index=$,e.isParser=u,e.lazy=N,e.letter=U,e.letters=V,e.lookahead=C,e.makeFailure=a,e.makeSuccess=i,e.noneOf=K,e.notFollowedBy=q,e.of=A,e.oneOf=F,e.optWhitespace=X,e.Parser=e,e.range=R,e.regex=S,e.regexp=S,e.sepBy=E,e.sepBy1=z,e.seq=_,e.seqMap=k,e.seqObj=O,e.string=I,e.succeed=A,e.takeWhile=W,e.test=M,e.whitespace=Y,e["fantasy-land/empty"]=T,e["fantasy-land/of"]=A,t.exports=e}])})}])});
//# sourceMappingURL=hydux.mutator.js.map